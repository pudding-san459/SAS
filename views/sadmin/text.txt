<?php
    include('sad_header.php');
?>

<header>
  <img src="../../img/Sas logo3.png" alt="" width="100px">
  <nav>
    <ul>
      <li class="active"><a href="sad_main.php" class="nav-link">Main</a></li>
      <li><a href="sad_user.php" class="nav-link">User</a></li>
      <li><a href="sad_admin.php" class="nav-link">Admin</a></li>
    </ul>
  </nav>
  <button type="submit" class="logout">
    <p>LogOut</p>
  </button>
</header>

<h3 class="title">INVOICE CREATION</h3>
<hr style="width: 80%; margin-left: auto; margin-right: auto;">

<?php
  $query = "SELECT DISTINCT deb_name FROM debt";
  $result = mysqli_query($con, $query);

  $existingCompanies = array();
  while ($row = mysqli_fetch_assoc($result)) {
    $existingCompanies[] = $row['deb_name'];
  }
?>

<form action="sad_pdf.php" method="POST">
<div class="inv-card">
  <div class="card" style="width: 50%;">
    <div class="card-body">
      <p>Company Name:</p>
      <input type="text" name="comp_name" id="comp_name" list="companyList" style="width:200px;" required>
      <datalist id="companyList" size="5">
        <?php
        // Iterate over existing company names and populate the datalist
        foreach ($existingCompanies as $company) {
            echo '<option value="' . $company . '">';
        }
        ?>
      </datalist>
      <p>Company Address:</p>
      <textarea type="text" name="comp_address" style="width:200px;" required></textarea>
      <p>Date:</p>
      <input type="date" name="date" style="width:200px;" required>
      <p>Terms (Days):</p>
      <input type="text" name="terms" style="width:200px;" required>
      <p>Description:</p>
      <textarea type="text" name="desc" style="width:200px;" required></textarea>
      <br><br>
      <center>

        <table style="border: 2px solid black;">
        <tr style="text-align:center;">
          <th>No.</th>
          <th>Particular</th>
          <th>Qtty</th>
          <th>Price/Unit</th>
        </tr>
        <?php
          for ($i=0; $i < 5; $i++) { 
        ?>
        <tr>
          <td><input type="text" style="width: 30px;" value="<?php echo $i+1; ?>."></td>
          <td><input type="text" style="width: 300px;" name="particular<?php echo $i+1; ?>"></td>
          <td><input type="text" style="width: 50px;" name="qtty<?php echo $i+1; ?>"></td>
          <td><input type="text" style="width: 100px;" name="price<?php echo $i+1; ?>"></td>
        </tr>
        <?php
          }
        ?>
        </table>
      </center>
      <br>
      <button type="submit" name="view">View Invoice</button>
    </div>
  </div>
</div>
</form>
